// update basic game status
$('#game-stat').html("<%= j render 'game_status' %>");
draw_card("<%= @trump.suit %>", "<%= @trump.display_name %>", "trump");

// update the game display
$('#board-info').html("<%= j render 'board_info' %>");
$('#bottom').droppable( {
    accept: '#cardPile div',
    hoverClass: 'hovered',
    drop: testDrop
} );
<% if @played_cards and not @played_cards[0].nil? %>
draw_card("<%= @played_cards[0].suit %>", "<%= @played_cards[0].display_name %>", "bottom");
<% end %>
<% if @played_cards and not @played_cards[1].nil? %>
draw_card("<%= @played_cards[1].suit %>", "<%= @played_cards[1].display_name %>", "left");
<% end %>
<% if @played_cards and not @played_cards[2].nil? %>
draw_card("<%= @played_cards[2].suit %>", "<%= @played_cards[2].display_name %>", "top");
<% end %>
<% if @played_cards and not @played_cards[3].nil? %>
draw_card("<%= @played_cards[3].suit %>", "<%= @played_cards[3].display_name %>", "right");
<% end %>

// update users hand
$('#cardPile').html("<%= j render 'card_pile' %>");
  for ( var i=0; i<<%= @cards.size %>; i++ ) {
    $("#card"+i).draggable( {
      containment: '#board-wrapper',
      stack: '#cardPile div',
      cursor: 'move',
      revert: true
    } );
    var currentCanvas = document.getElementById("canv"+i);
    draw_card(currentCanvas.dataset.suit, currentCanvas.dataset.display_name, "canv"+i);
  }


// continue polling unless we're waiting on the player to play a card
<% if @waiting_on != 'YOU' %>
GamePoller.poll();
<% else %>
alert('Its your turn, play a card by dragging it!');
<% end %>
