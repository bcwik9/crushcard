#game{data: {url: game_path(@game), player_path: player_action_game_path, poll: @poll.to_s, updated: @game.updated_at } }
  - if @winners.present?
    %h2{style: "margin-bottom: 10px;"}
      Game Over:
      Winner:
      = "\"#{@winners.join(', ')}\""
    = link_to "New Game", new_game_path, class: "btn btn-lg btn-success"
    %br

  .row
    .col-xs-12
      - layout = YAML.load_file("config/board-layout.yml")
      - num_players = @game.config[:players].compact.size
      - layout = layout[num_players]
      - top_margin = layout.try(:[], 'top_margin') || '30px'
      #board-wrapper{style: "margin-top: #{top_margin}; margin-bottom: 0px;"}
        #message.hidden
          .text
          .ok
            = link_to "Ok", "#", class: "btn btn-success btn-lg"
        #board
          - (0..num_players - 1).each do |index|
            - winning = @names[index].present? && @indexes[index] == @game.config[:winner_index]
            - extra_class = []
            - extra_class << :winning if winning
            - extra_class << :your_slot if index == 0
            - card = @played_cards[index]
            = render 'playing_card', id: "table-card-#{index}", card: card, extra_class: extra_class, position: layout['cards'][index]
            = render 'player', index: index, you: (@is_playing && index == 0), position: layout['players'][index]

      .row{style: "height: 130px;"}
        .col-xs-3
          = render "controls"
        .col-xs-6
        .col-xs-3{style: "position: relative;"}
          - if @dealt
            .trump_suit{style: "position: absolute; left: -20px; top: -25px;"}
              %h4{style: "margin-bottom: 10px;"} Trump Suit
              = render 'playing_card', id: :trump, card: @game.config[:trump_card]
          - else
            %h4{style: "border: 1px solid white; border-radius: 5px; padding: 15px;"} 
              Waiting For: 
              %br
              #{@game.config[:waiting_on_reason]}.
              - if @is_playing 
                %br
                - if @enough_players
                  - if @can_start_game
                    You
                  - else
                    Dealer
                  can Deal/Start.
                - else
                  Need more players.
      .row
        .col-xs-12
          Your Hand 
          %i (double click to play)
          #cardPile
            = render "card_pile"
  = render "debug"
